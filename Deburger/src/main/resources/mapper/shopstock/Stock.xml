<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper
	namespace="com.deburger.app.shop.stock.mapper.StockMapper">
	<select id="selectStock" parameterType="StockVO">
select m.material_number
		,m.material_name
		,m.material_classification
		,m.unit
		,m.sale_unitprice
		,NVL(s.stock_count,0)
		,NVL(s.safety_stock,0)
from store_stock s RIGHT OUTER JOIN material m
		on s.material_number = m.material_number
order by STOCK_COUNT
	</select>

	<insert id="insertCart" parameterType="StockVO">
		INSERT INTO
			order_cart(cart_number
			,Store_number
			,material_number
			,count)
		VALUES
			(OC_SEQ.NEXTVAL
			,'FRC0000001'
			,#{materialNumber}
			,1)
	</insert>

	<select id="selectStockinfo" parameterType="StockVO">
select i.expiration_limit
       ,m.material_name
       ,i.remain_stock_count
       ,d.count
       ,o.order_day
       ,i.order_details_number
from store_in i join material m
      on i.Material_number = m.Material_number
      join order_details d
      on i.order_details_Number = d.order_details_Number
      join store_Order o
      on o.order_number = d.order_number
where i.Material_number = #{materialNumber}
order by i.order_details_number
	</select>

</mapper>